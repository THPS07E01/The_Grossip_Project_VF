<% flash.each do |key, value| %>
  <div class="alert alert-<%= key %>"><%= value %></div>
<% end %>

	<div class="container w-50 mt-4">
		<h2 class="text-center text-primary">Nos Grossips</h2>
		
    <h6 class="d-flex justify-content-center">À ce jour il y a <span class="text-danger ml-3 mr-2"> <%= User.all.count %></span> utilisateurs</h6>
    <div class="container w-50 mr-5">
      <ul class="navbar-nav d-flex justify-content-start ml-3">
	      <li class="d-flex justify-content-start ml-4"> <h6><span class="text-danger mr-2"><%= Gossip.all.count %></span>gossips</h6>
	      </li>
	      <li><h6 class="d-flex justify-content-start ml-4"><span class="text-danger mr-2"><%= Comment.all.count %></span> commentaires</h6></li>
	      <li><h6 class="d-flex justify-content-start ml-4"><span class="text-danger mr-2"><%= City.all.count %></span> villes</h6></li>
    	</ul>
  	</div>
	</div>

     <script>
         $(document).on('turbolinks:load', function() {
         if ($('#test_wrapper').length == 0)
           {
             $('#test').DataTable( {
               stateSave: true,
               "order": [[ 2, "desc" ]],
               "iDisplayLength": 25,
               "bLengthChange": false,
               "oLanguage": {
                 "sLengthMenu": "Gossips _MENU_ ",
                 "sSearch": " _INPUT_",
               }
             });
           } 
           $('.dataTables_filter input').attr('placeholder', 'Fais ta recherche...');
         });
     </script>

<div class="d-flex justify-content-center">
<section class="w-75">
<table id="test" class="table table-striped table-dark table-hover">
  <thead>
    <tr>
      <th scope="col">#</th>
      <th scope="col">Utilisateur</th>
      <th scope="col">Créé le</th>
      <th scope="col">Titre</th>
      <th scope="col">Ville</th>
			<th scope="col" class="text-center"></th>
      <th scope="col" class="text-center"></th>
    </tr>
  </thead>

  <tbody >
	<% Gossip.all.reverse.each do |gossip| %>
    <tr>
      <th scope="row" data-defaultsign="month" data-sortcolumn="1" data-sortkey="1-1"><%= gossip.id %></th>
      <td><%= link_to "#{gossip.user.username}", user_path(gossip.user.id) %></td>
      <td><%= gossip.created_at.strftime("%d/%m/%Y") %></td>
      <td class="font-italic"><%= gossip.title %></td>
      <td><%= gossip.user.city.name %></td>
      <td  class="text-center">
          <a class="text-decoration-none" href="<%= gossip_path(gossip.id) %>"><i class="far fa-comments ">  <%= gossip.comments.count %></i></a> 
      </td>  
      
      <td  class="text-center">
          <a class="text-decoration-none" href="<%= gossip_path(gossip.id) %>"><i class="far fa-eye"></i></a> 
          <% if logged_in? && current_user.id == gossip.user_id %>
          <a  href="<%= edit_gossip_path(gossip.id) %>"><i class="mr-3 ml-3 fas fa-pencil-alt"></i> </a>
          <a href="<%= gossip_path(gossip.id) %>" data-confirm="Etes-vous sûr ?" data-method="DELETE"><i class="fas fa-trash-alt"></i></a>
          <% else %>
          <% end %>
      </td>
    </tr>
	<% end %>
  </tbody>
</table>
<section>
</div>



<div class="container">
  <div class="row justify-content-center">
    <div class="col-6">
      <form>
  <div class="form-group">
    <label>Password</label>
    <div class="input-group" id="show_hide_password">
      <input class="form-control" type="password">
      <div class="input-group-addon">
        <a href=""><i class="fa fa-eye-slash" aria-hidden="true"></i></a>
      </div>
    </div>
  </div>
</form>
    </div>
  </div>
</div>